{% load i18n %}

<h3>{% trans "Lista de pasajeros" %}</h3>
<table class="table">
    <tbody>
    {% for passenger in passengers %}
        <tr>
            <td>
                <img src="{{ passenger.user.get_avatar_url }}" class="img-circle avatar">
            </td>
            <td>
                {{ passenger.user.get_full_name }} <br />
                <small>{% trans "Unido el" %} {{ passenger.created }}</small>
            </td>
        </tr>
        <tr class="passenger-actions">
            {% if request.user == journey.driver and request.user == journey.user %}
                {% if passenger.status == CONFIRMED %}
                    <td colspan="2">
                        <form method="post" action="{% url "journeys:throw-out" passenger.pk %}">
                            {% csrf_token %}
                            <input type="hidden" name="return_to" value="{{ request.path }}">
                            <button type="submit" class="btn btn-danger">{% trans "Expulsar" %}</button>
                        </form>
                    </td>
                {% else %}
                    <td colspan="2">
                        <form method="post" action="{% url "journeys:confirm" passenger.pk %}" style="display: inline-block">
                            {% csrf_token %}
                                <input type="hidden" name="return_to" value="{{ request.path }}">
                                <input type="hidden" name="user" value="{{ passenger.user.pk }}">
                                <button type="submit" class="btn btn-success">{% trans "Confirmar" %}</button>
                        </form>
                        <form method="post" action="{% url "journeys:reject" passenger.pk %}" style="display: inline-block">
                            {% csrf_token %}
                            <input type="hidden" name="return_to" value="{{ request.path }}">
                            <input type="hidden" name="user" value="{{ passenger.user.pk }}">
                            <button type="submit" class="btn btn-danger">{% trans "Rechazar" %}</button>
                        </form>
                    </td>
                {% endif %}
            {% endif %}
        </tr>
    {% empty %}
        <p class="text-muted">{% trans "No hay pasajeros ahora mismo." %}</p>
    {% endfor %}
    </tbody>
</table>
